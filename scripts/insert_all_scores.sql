-- Insert all cutoff scores for all programs
WITH inst_state AS (
  SELECT i.id as inst_id, i.name as inst_name, s.code as state_code
  FROM institutions i
  JOIN states s ON s.id = i.state_id
),
prog_lookup AS (
  SELECT rp.id as prog_id, ist.inst_name, ist.state_code
  FROM residency_programs rp
  JOIN inst_state ist ON ist.inst_id = rp.institution_id
),
scores_data AS (
  SELECT * FROM (VALUES
    ('COMPLEXO HOSPITALAR DA UFC/EBSERH', 'CE', 2025, 766.10),
    ('Hospital Geral de Fortaleza (HGF)', 'CE', 2025, 758.90),
    ('HOSPITAL DAS FORÇAS ARMADAS', 'DF', 2025, 790.00),
    ('HOSPITAL DAS FORÇAS ARMADAS', 'DF', 2024, 848.0),
    ('HOSPITAL DAS FORÇAS ARMADAS', 'DF', 2023, 814.0),
    ('HOSPITAL DAS FORÇAS ARMADAS', 'DF', 2022, 786.5),
    ('ISMEP- INSTITUTO SANTA MARTA DE ENSINO E PESQUISA', 'DF', 2024, 818.0),
    ('HOSPITAL UNIVERSITÁRIO DE BRASÍLIA – UnB', 'DF', 2025, 805.00),
    ('HOSPITAL UNIVERSITÁRIO DE BRASÍLIA – UnB', 'DF', 2024, 887.5),
    ('HOSPITAL UNIVERSITÁRIO DE BRASÍLIA – UnB', 'DF', 2023, 831.3),
    ('HOSPITAL UNIVERSITÁRIO JÚLIO MULLER', 'MT', 2025, 765.00),
    ('HOSPITAL UNIVERSITÁRIO JÚLIO MULLER', 'MT', 2024, 830.0),
    ('Caixa de Assistência dos Servidores do Estado de Mato Grosso do Sul', 'MS', 2025, 752.70),
    ('HC DA UNIVERSIDADE FEDERAL DE MINAS GERAIS', 'MG', 2025, 818.50),
    ('HC DA UNIVERSIDADE FEDERAL DE MINAS GERAIS', 'MG', 2024, 908.0),
    ('HC DA UNIVERSIDADE FEDERAL DE MINAS GERAIS', 'MG', 2023, 874.0),
    ('HC DA UNIVERSIDADE FEDERAL DE MINAS GERAIS', 'MG', 2022, 903.1),
    ('HOSPITAL UNIVERSITÁRIO DA UNIVERSIDADE FEDERAL DE JUIZ DE FORA', 'MG', 2025, 776.80),
    ('HOSPITAL UNIVERSITÁRIO DA UNIVERSIDADE FEDERAL DE JUIZ DE FORA', 'MG', 2024, 867.5),
    ('HOSPITAL UNIVERSITÁRIO DA UNIVERSIDADE FEDERAL DE JUIZ DE FORA', 'MG', 2023, 810.0),
    ('HOSPITAL UNIVERSITÁRIO DA UNIVERSIDADE FEDERAL DE JUIZ DE FORA', 'MG', 2022, 837.1),
    ('UNIVERSIDADE ESTADUAL DE MONTES CLAROS – UNIMONTES', 'MG', 2025, 751.70),
    ('UNIVERSIDADE ESTADUAL DE MONTES CLAROS – UNIMONTES', 'MG', 2024, 845.0),
    ('UNIVERSIDADE ESTADUAL DE MONTES CLAROS – UNIMONTES', 'MG', 2023, 797.0),
    ('UNIVERSIDADE ESTADUAL DE MONTES CLAROS – UNIMONTES', 'MG', 2022, 792.0),
    ('UNIVERSIDADE FEDERAL DE UBERLÂNDIA – UFU', 'MG', 2025, 792.66),
    ('COMPLEXO DO HOSPITAL DE CLINICAS DA UFPR', 'PR', 2025, 795.50),
    ('COMPLEXO DO HOSPITAL DE CLINICAS DA UFPR', 'PR', 2024, 869.5),
    ('COMPLEXO DO HOSPITAL DE CLINICAS DA UFPR', 'PR', 2023, 822.0),
    ('HC PROFESSOR ROMERO MARQUES – UNIVERSIDADE FEDERAL DE PERNAMBUCO', 'PE', 2025, 801.00),
    ('HC PROFESSOR ROMERO MARQUES – UNIVERSIDADE FEDERAL DE PERNAMBUCO', 'PE', 2024, 872.0),
    ('HC PROFESSOR ROMERO MARQUES – UNIVERSIDADE FEDERAL DE PERNAMBUCO', 'PE', 2023, 846.0),
    ('HC PROFESSOR ROMERO MARQUES – UNIVERSIDADE FEDERAL DE PERNAMBUCO', 'PE', 2022, 798.0),
    ('HU ANTONIO PEDRO – UNIVERSIDADE FEDERAL FLUMINENSE', 'RJ', 2025, 796.30),
    ('HU ANTONIO PEDRO – UNIVERSIDADE FEDERAL FLUMINENSE', 'RJ', 2024, 850.0),
    ('HU ANTONIO PEDRO – UNIVERSIDADE FEDERAL FLUMINENSE', 'RJ', 2023, 795.0),
    ('HU ANTONIO PEDRO – UNIVERSIDADE FEDERAL FLUMINENSE', 'RJ', 2022, 786.5),
    ('HOSPITAL CENTRAL DA POLÍCIA MILITAR DO ESTADO DO RIO DE JANEIRO', 'RJ', 2025, 742.80),
    ('HOSPITAL CENTRAL DA POLÍCIA MILITAR DO ESTADO DO RIO DE JANEIRO', 'RJ', 2024, 828.5),
    ('HOSPITAL CENTRAL DA POLÍCIA MILITAR DO ESTADO DO RIO DE JANEIRO', 'RJ', 2023, 797.0),
    ('HOSPITAL FEDERAL DA LAGOA', 'RJ', 2025, 759.50),
    ('HOSPITAL FEDERAL DA LAGOA', 'RJ', 2024, 836.0),
    ('HOSPITAL FEDERAL DA LAGOA', 'RJ', 2023, 827.0),
    ('HOSPITAL FEDERAL DA LAGOA', 'RJ', 2022, 804.0),
    ('HOSPITAL FEDERAL DE BONSUCESSO', 'RJ', 2025, 746.30),
    ('HOSPITAL FEDERAL DE BONSUCESSO', 'RJ', 2024, 826.0),
    ('HOSPITAL FEDERAL DE BONSUCESSO', 'RJ', 2023, 780.0),
    ('HOSPITAL FEDERAL DE BONSUCESSO', 'RJ', 2022, 777.0),
    ('HOSPITAL FEDERAL DO ANDARAI', 'RJ', 2025, 736.10),
    ('HOSPITAL FEDERAL DO ANDARAI', 'RJ', 2024, 813.0),
    ('HOSPITAL FEDERAL DO ANDARAI', 'RJ', 2023, 810.0),
    ('HOSPITAL FEDERAL DO ANDARAI', 'RJ', 2022, 778.0),
    ('HOSPITAL FEDERAL DOS SERVIDORES DO ESTADO', 'RJ', 2025, 746.70),
    ('HOSPITAL FEDERAL DOS SERVIDORES DO ESTADO', 'RJ', 2024, 834.5),
    ('HOSPITAL FEDERAL DOS SERVIDORES DO ESTADO', 'RJ', 2023, 816.0),
    ('HOSPITAL FEDERAL DOS SERVIDORES DO ESTADO', 'RJ', 2022, 803.0),
    ('HOSPITAL UNIVERSITÁRIO GAFFRÉE E GUINLE – UNIRIO', 'RJ', 2025, 769.50),
    ('HOSPITAL UNIVERSITÁRIO GAFFRÉE E GUINLE – UNIRIO', 'RJ', 2024, 831.0),
    ('HOSPITAL UNIVERSITÁRIO GAFFRÉE E GUINLE – UNIRIO', 'RJ', 2023, 812.0),
    ('HOSPITAL UNIVERSITÁRIO GAFFRÉE E GUINLE – UNIRIO', 'RJ', 2022, 791.0),
    ('INSTITUTO NACIONAL DE CÂNCER – INCA', 'RJ', 2025, 750.00),
    ('INSTITUTO NACIONAL DE CÂNCER – INCA', 'RJ', 2024, 834.5),
    ('INSTITUTO NACIONAL DE CÂNCER – INCA', 'RJ', 2023, 791.0),
    ('HC DA UNIVERSIDADE FEDERAL DO RIO GRANDE DO NORTE', 'RN', 2025, 766.10),
    ('HC DA UNIVERSIDADE FEDERAL DO RIO GRANDE DO NORTE', 'RN', 2024, 859.0),
    ('HC DA UNIVERSIDADE FEDERAL DO RIO GRANDE DO NORTE', 'RN', 2023, 821.0),
    ('HOSPITAL UNIVERSITÁRIO DA UNIVERSIDADE FEDERAL DE SERGIPE', 'SE', 2025, 752.20),
    ('HOSPITAL UNIVERSITÁRIO DA UNIVERSIDADE FEDERAL DE SERGIPE', 'SE', 2024, 807.0),
    ('HOSPITAL UNIVERSITÁRIO DA UNIVERSIDADE FEDERAL DE SERGIPE', 'SE', 2023, 766.0),
    ('FUNDAÇÃO FACULDADE DE MEDICINA', 'SP', 2025, 792.00),
    ('FUNDAÇÃO FACULDADE DE MEDICINA', 'SP', 2024, 857.0),
    ('INSTITUTO DE ASSISTÊNCIA MÉDICA AO SERVIDOR PÚBLICO ESTADUAL – IAMSPE', 'SP', 2025, 822.50),
    ('INSTITUTO DE ASSISTÊNCIA MÉDICA AO SERVIDOR PÚBLICO ESTADUAL – IAMSPE', 'SP', 2024, 898.0),
    ('IRMANDADE DA SANTA CASA DE MISERICÓRDIA DE SÃO PAULO', 'SP', 2025, 781.50),
    ('IRMANDADE DA SANTA CASA DE MISERICÓRDIA DE SÃO PAULO', 'SP', 2024, 851.0),
    ('IRMANDADE DA SANTA CASA DE MISERICÓRDIA – RIBEIRÃO PRETO', 'SP', 2025, 770.60),
    ('IRMANDADE DA SANTA CASA DE MISERICÓRDIA – RIBEIRÃO PRETO', 'SP', 2024, 842.0),
    ('PONTIFÍCIA UNIVERSIDADE CATÓLICA DE SÃO PAULO', 'SP', 2025, 798.00),
    ('PONTIFÍCIA UNIVERSIDADE CATÓLICA DE SÃO PAULO', 'SP', 2024, 900.5),
    ('UNIVERSIDADE DE SÃO PAULO - CAPITAL', 'SP', 2025, 857.50),
    ('UNIVERSIDADE DE SÃO PAULO - CAPITAL', 'SP', 2024, 935.0),
    ('UNIVERSIDADE DE SÃO PAULO - FACULDADE DE MEDICINA DE RIBEIRÃO PRETO', 'SP', 2025, 826.50),
    ('UNIVERSIDADE DE SÃO PAULO - FACULDADE DE MEDICINA DE RIBEIRÃO PRETO', 'SP', 2024, 903.0),
    ('UNIVERSIDADE ESTADUAL DE CAMPINAS', 'SP', 2025, 823.00),
    ('UNIVERSIDADE ESTADUAL DE CAMPINAS', 'SP', 2024, 902.5),
    ('UNIVERSIDADE FEDERAL DE SÃO PAULO – UNIFESP', 'SP', 2025, 826.00),
    ('UNIVERSIDADE FEDERAL DE SÃO PAULO – UNIFESP', 'SP', 2024, 913.0),
    ('FUNDAÇÃO ABC', 'SP', 2025, 800.00),
    ('FUNDAÇÃO ABC', 'SP', 2024, 879.5),
    ('FACULDADE DE MEDICINA DE JUNDIAÍ', 'SP', 2025, 771.00),
    ('FACULDADE DE MEDICINA DE JUNDIAÍ', 'SP', 2024, 839.0),
    ('HOSPITAL REGIONAL DE PRESIDENTE PRUDENTE – UNESP', 'SP', 2025, 754.00),
    ('HOSPITAL REGIONAL DE PRESIDENTE PRUDENTE – UNESP', 'SP', 2024, 817.0),
    ('HOSPITAL SÍRIO-LIBANÊS', 'SP', 2025, 803.00),
    ('HOSPITAL SÍRIO-LIBANÊS', 'SP', 2024, 901.5),
    ('HOSPITAL OSVALDO CRUZ – BH/IPSEMG', 'MG', 2025, 794.00),
    ('HOSPITAL OSVALDO CRUZ – BH/IPSEMG', 'MG', 2024, 875.0)
  ) AS sd(inst_name, state_code, year, score)
)
INSERT INTO cutoff_scores (residency_program_id, year, score)
SELECT 
  pl.prog_id,
  sd.year,
  sd.score
FROM scores_data sd
JOIN prog_lookup pl ON pl.inst_name = sd.inst_name AND pl.state_code = sd.state_code
ON CONFLICT (residency_program_id, year) DO UPDATE SET score = EXCLUDED.score;
